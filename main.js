(()=>{"use strict";const e=async e=>{const t=await fetch((n=e,`https://api.openweathermap.org/data/2.5/weather?q=${n}&appid=0b94a86a7ab72879839de5a724686c9f`),{mode:"cors"});var n;if(!t.ok)throw new Error(t.status);return t.json()},t=(e,t)=>"C"===t?1.8*e+32:5/9*(e-32),n=(()=>{const n={};return{getForecast:()=>n,loadContents:async t=>{n.unit="C",n.city=t;try{const o=await e(t);return n.temp=o.main.temp-273.15,n.feelsLike=o.main.feels_like-273.15,n.humidity=o.main.humidity,n.icon=o.weather[0].icon,n.main=o.weather[0].main,n.country=o.sys.country,n.time=(new Date).toLocaleTimeString(),n.tempMax=o.main.temp_max-273.15,n.tempMin=o.main.temp_min-273.15,n.humidity=o.main.humidity,n.windSpeed=o.wind.speed,!0}catch(e){return!1}},toggleUnit:()=>(n.temp=t(n.temp,n.unit),n.feelsLike=t(n.feelsLike,n.unit),n.tempMax=t(n.tempMax,n.unit),n.tempMin=t(n.tempMin,n.unit),n.unit="C"===n.unit?"F":"C",n.unit)}})();(()=>{const e=document.querySelector("input.city"),t=document.querySelector(".search-city"),o=document.querySelector(".main"),i=document.querySelector("body"),r=document.querySelector(".temperature"),c=document.querySelector(".feels-like-temp"),a=document.querySelector(".unit-selector"),u=document.querySelector(".weather-icon"),m=document.querySelector(".weather-main"),d=document.querySelector(".location-info > .city"),s=document.querySelector(".country"),l=document.querySelector(".time"),y=document.querySelector(".temp-max > .content"),p=document.querySelector(".temp-min > .content"),h=document.querySelector(".humidity > .content"),C=document.querySelector(".wind > .content"),w=e=>{e?(i.style.pointerEvents="none",o.classList.remove("loaded")):(o.classList.add("loaded"),i.style.pointerEvents="auto")},S=()=>{const e=n.getForecast();r.textContent=`${Math.round(e.temp)}`,c.textContent=`${Math.round(e.feelsLike)}째`,a.textContent=`째${e.unit}`,y.textContent=`${Math.round(e.tempMax)}째`,p.textContent=`${Math.round(e.tempMin)}째`},x=async()=>{const t=(()=>{let t=e.value.toLowerCase();return t=t[0].toUpperCase()+t.slice(1),e.value="",t})();w(!0);const o=await n.loadContents(t);w(!1),o?(()=>{S();const e=n.getForecast();(e=>{const t=document.createElement("img");t.src=`http://openweathermap.org/img/wn/${e.icon}@2x.png`,u.childElementCount&&u.lastChild.remove(),u.appendChild(t)})(e),(e=>{m.textContent=e.main,d.textContent=e.city,s.textContent=e.country,l.textContent=e.time})(e),(e=>{h.textContent=`${e.humidity}%`,C.textContent=`${e.windSpeed}m/s`})(e)})():console.log("Location not found")},q=()=>{n.toggleUnit(),S()};return{init:()=>{e.value="London",x(),t.addEventListener("click",x),e.addEventListener("keyup",(({key:e})=>{"Enter"===e&&x()})),a.addEventListener("click",q)}}})().init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUFBU2xELE1BckdqQyxHQ0FYLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9tb2R1bGVzL1dlYXRoZXIuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvbW9kdWxlcy9Gb3JlY2FzdC5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9tb2R1bGVzL1VJLmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFdlYXRoZXIgPSAoKCkgPT4ge1xuICBjb25zdCBrZXkgPSAnMGI5NGE4NmE3YWI3Mjg3OTgzOWRlNWE3MjQ2ODZjOWYnO1xuXG4gIGNvbnN0IGdldFVybCA9IChjaXR5KSA9PiB7XG4gICAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtjaXR5fSZhcHBpZD0ke2tleX1gO1xuICAgIHJldHVybiB1cmw7XG4gIH07XG5cbiAgY29uc3QgZ2V0RGF0YSA9IGFzeW5jIChjaXR5TmFtZSkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZ2V0VXJsKGNpdHlOYW1lKSwgeyBtb2RlOiAnY29ycycgfSk7XG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBnZXREYXRhLFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgV2VhdGhlcjtcblxuLy8gU2FtcGxlIEpzb25cbi8vXG4vLyB7XG4vLyAgIFwiY29vcmRcIjoge1xuLy8gICAgIFwibG9uXCI6IC0xMjIuMDgsXG4vLyAgICAgXCJsYXRcIjogMzcuMzlcbi8vICAgfSxcbi8vICAgXCJ3ZWF0aGVyXCI6IFtcbi8vICAgICB7XG4vLyAgICAgICBcImlkXCI6IDgwMCxcbi8vICAgICAgIFwibWFpblwiOiBcIkNsZWFyXCIsXG4vLyAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiY2xlYXIgc2t5XCIsXG4vLyAgICAgICBcImljb25cIjogXCIwMWRcIlxuLy8gICAgIH1cbi8vICAgXSxcbi8vICAgXCJiYXNlXCI6IFwic3RhdGlvbnNcIixcbi8vICAgXCJtYWluXCI6IHtcbi8vICAgICBcInRlbXBcIjogMjgyLjU1LFxuLy8gICAgIFwiZmVlbHNfbGlrZVwiOiAyODEuODYsXG4vLyAgICAgXCJ0ZW1wX21pblwiOiAyODAuMzcsXG4vLyAgICAgXCJ0ZW1wX21heFwiOiAyODQuMjYsXG4vLyAgICAgXCJwcmVzc3VyZVwiOiAxMDIzLFxuLy8gICAgIFwiaHVtaWRpdHlcIjogMTAwXG4vLyAgIH0sXG4vLyAgIFwidmlzaWJpbGl0eVwiOiAxNjA5Myxcbi8vICAgXCJ3aW5kXCI6IHtcbi8vICAgICBcInNwZWVkXCI6IDEuNSxcbi8vICAgICBcImRlZ1wiOiAzNTBcbi8vICAgfSxcbi8vICAgXCJjbG91ZHNcIjoge1xuLy8gICAgIFwiYWxsXCI6IDFcbi8vICAgfSxcbi8vICAgXCJkdFwiOiAxNTYwMzUwNjQ1LFxuLy8gICBcInN5c1wiOiB7XG4vLyAgICAgXCJ0eXBlXCI6IDEsXG4vLyAgICAgXCJpZFwiOiA1MTIyLFxuLy8gICAgIFwibWVzc2FnZVwiOiAwLjAxMzksXG4vLyAgICAgXCJjb3VudHJ5XCI6IFwiVVNcIixcbi8vICAgICBcInN1bnJpc2VcIjogMTU2MDM0MzYyNyxcbi8vICAgICBcInN1bnNldFwiOiAxNTYwMzk2NTYzXG4vLyAgIH0sXG4vLyAgIFwidGltZXpvbmVcIjogLTI1MjAwLFxuLy8gICBcImlkXCI6IDQyMDAwNjM1Myxcbi8vICAgXCJuYW1lXCI6IFwiTW91bnRhaW4gVmlld1wiLFxuLy8gICBcImNvZFwiOiAyMDBcbi8vICAgfVxuIiwiaW1wb3J0IFdlYXRoZXIgZnJvbSAnLi9XZWF0aGVyJztcblxuY29uc3QgY2hhbmdlVW5pdCA9IChudW0sIGN1cnJlbnRVbml0KSA9PiB7XG4gIGlmIChjdXJyZW50VW5pdCA9PT0gJ0MnKSByZXR1cm4gbnVtICogKDkgLyA1KSArIDMyO1xuICByZXR1cm4gKG51bSAtIDMyKSAqICg1IC8gOSk7XG59O1xuXG5jb25zdCBGb3JlY2FzdCA9ICgoKSA9PiB7XG4gIGNvbnN0IGZvcmVjYXN0ID0ge307XG5cbiAgY29uc3QgbG9hZENvbnRlbnRzID0gYXN5bmMgKGNpdHlOYW1lKSA9PiB7XG4gICAgZm9yZWNhc3QudW5pdCA9ICdDJztcbiAgICBmb3JlY2FzdC5jaXR5ID0gY2l0eU5hbWU7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHdlYXRoZXJEYXRhID0gYXdhaXQgV2VhdGhlci5nZXREYXRhKGNpdHlOYW1lKTtcbiAgICAgIC8vIHRlbXAtaW5mb1xuICAgICAgZm9yZWNhc3QudGVtcCA9IHdlYXRoZXJEYXRhLm1haW4udGVtcCAtIDI3My4xNTtcbiAgICAgIGZvcmVjYXN0LmZlZWxzTGlrZSA9IHdlYXRoZXJEYXRhLm1haW4uZmVlbHNfbGlrZSAtIDI3My4xNTtcbiAgICAgIGZvcmVjYXN0Lmh1bWlkaXR5ID0gd2VhdGhlckRhdGEubWFpbi5odW1pZGl0eTtcbiAgICAgIGZvcmVjYXN0Lmljb24gPSB3ZWF0aGVyRGF0YS53ZWF0aGVyWzBdLmljb247XG4gICAgICAvLyBsb2NhdGlvbi1pbmZvXG4gICAgICBmb3JlY2FzdC5tYWluID0gd2VhdGhlckRhdGEud2VhdGhlclswXS5tYWluO1xuICAgICAgZm9yZWNhc3QuY291bnRyeSA9IHdlYXRoZXJEYXRhLnN5cy5jb3VudHJ5O1xuICAgICAgZm9yZWNhc3QudGltZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XG4gICAgICAvLyBleHRyYS1pbmZvXG4gICAgICBmb3JlY2FzdC50ZW1wTWF4ID0gd2VhdGhlckRhdGEubWFpbi50ZW1wX21heCAtIDI3My4xNTtcbiAgICAgIGZvcmVjYXN0LnRlbXBNaW4gPSB3ZWF0aGVyRGF0YS5tYWluLnRlbXBfbWluIC0gMjczLjE1O1xuICAgICAgZm9yZWNhc3QuaHVtaWRpdHkgPSB3ZWF0aGVyRGF0YS5tYWluLmh1bWlkaXR5O1xuICAgICAgZm9yZWNhc3Qud2luZFNwZWVkID0gd2VhdGhlckRhdGEud2luZC5zcGVlZDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB0b2dnbGVVbml0ID0gKCkgPT4ge1xuICAgIGZvcmVjYXN0LnRlbXAgPSBjaGFuZ2VVbml0KGZvcmVjYXN0LnRlbXAsIGZvcmVjYXN0LnVuaXQpO1xuICAgIGZvcmVjYXN0LmZlZWxzTGlrZSA9IGNoYW5nZVVuaXQoZm9yZWNhc3QuZmVlbHNMaWtlLCBmb3JlY2FzdC51bml0KTtcbiAgICBmb3JlY2FzdC50ZW1wTWF4ID0gY2hhbmdlVW5pdChmb3JlY2FzdC50ZW1wTWF4LCBmb3JlY2FzdC51bml0KTtcbiAgICBmb3JlY2FzdC50ZW1wTWluID0gY2hhbmdlVW5pdChmb3JlY2FzdC50ZW1wTWluLCBmb3JlY2FzdC51bml0KTtcbiAgICBmb3JlY2FzdC51bml0ID0gZm9yZWNhc3QudW5pdCA9PT0gJ0MnID8gJ0YnIDogJ0MnO1xuICAgIHJldHVybiBmb3JlY2FzdC51bml0O1xuICB9O1xuXG4gIGNvbnN0IGdldEZvcmVjYXN0ID0gKCkgPT4gZm9yZWNhc3Q7XG5cbiAgcmV0dXJuIHtcbiAgICBnZXRGb3JlY2FzdCxcbiAgICBsb2FkQ29udGVudHMsXG4gICAgdG9nZ2xlVW5pdCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEZvcmVjYXN0O1xuIiwiaW1wb3J0IEZvcmVjYXN0IGZyb20gJy4vRm9yZWNhc3QnO1xuXG5jb25zdCBVSSA9ICgoKSA9PiB7XG4gIGNvbnN0ICRjaXR5SW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dC5jaXR5Jyk7XG4gIGNvbnN0ICRzZWFyY2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2VhcmNoLWNpdHknKTtcbiAgY29uc3QgJG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbicpO1xuICBjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuICAvLyB0ZW1wLWluZm9cbiAgY29uc3QgJHRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUnKTtcbiAgY29uc3QgJGZlZWxzTGlrZVRlbXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlbHMtbGlrZS10ZW1wJyk7XG4gIGNvbnN0ICR1bml0U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1zZWxlY3RvcicpO1xuICBjb25zdCAkd2VhdGhlckljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1pY29uJyk7XG4gIC8vIGxvY2F0aW9uLWluZm9cbiAgY29uc3QgJHdlYXRoZXJNYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItbWFpbicpO1xuICBjb25zdCAkY2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2NhdGlvbi1pbmZvID4gLmNpdHknKTtcbiAgY29uc3QgJGNvdW50cnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY291bnRyeScpO1xuICBjb25zdCAkdGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50aW1lJyk7XG4gIC8vIGV4dHJhLWluZm9cbiAgY29uc3QgJHRlbXBNYXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcC1tYXggPiAuY29udGVudCcpO1xuICBjb25zdCAkdGVtcE1pbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wLW1pbiA+IC5jb250ZW50Jyk7XG4gIGNvbnN0ICRodW1pZGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5odW1pZGl0eSA+IC5jb250ZW50Jyk7XG4gIGNvbnN0ICR3aW5kU3BlZWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luZCA+IC5jb250ZW50Jyk7XG5cbiAgY29uc3QgZ2V0Q2l0eUlucHV0ID0gKCkgPT4ge1xuICAgIGxldCBjaXR5TmFtZSA9ICRjaXR5SW5wdXQudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICBjaXR5TmFtZSA9IGNpdHlOYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBjaXR5TmFtZS5zbGljZSgxKTtcbiAgICAkY2l0eUlucHV0LnZhbHVlID0gJyc7XG4gICAgcmV0dXJuIGNpdHlOYW1lO1xuICB9O1xuXG4gIGNvbnN0IGxvYWRpbmcgPSAoYmVnaW4pID0+IHtcbiAgICBpZiAoYmVnaW4pIHtcbiAgICAgIGJvZHkuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICRtYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2xvYWRlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkbWFpbi5jbGFzc0xpc3QuYWRkKCdsb2FkZWQnKTtcbiAgICAgIGJvZHkuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdhdXRvJztcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlVGVtcGVyYXR1cmVET00gPSAoKSA9PiB7XG4gICAgY29uc3QgZm9yZWNhc3QgPSBGb3JlY2FzdC5nZXRGb3JlY2FzdCgpO1xuICAgICR0ZW1wLnRleHRDb250ZW50ID0gYCR7TWF0aC5yb3VuZChmb3JlY2FzdC50ZW1wKX1gO1xuICAgICRmZWVsc0xpa2VUZW1wLnRleHRDb250ZW50ID0gYCR7TWF0aC5yb3VuZChmb3JlY2FzdC5mZWVsc0xpa2UpfcKwYDtcbiAgICAkdW5pdFNlbGVjdG9yLnRleHRDb250ZW50ID0gYMKwJHtmb3JlY2FzdC51bml0fWA7XG4gICAgJHRlbXBNYXgudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKGZvcmVjYXN0LnRlbXBNYXgpfcKwYDtcbiAgICAkdGVtcE1pbi50ZXh0Q29udGVudCA9IGAke01hdGgucm91bmQoZm9yZWNhc3QudGVtcE1pbil9wrBgO1xuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZVdlYXRoZXJJY29uID0gKGZvcmVjYXN0KSA9PiB7XG4gICAgY29uc3Qgd2VhdGhlckljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICB3ZWF0aGVySWNvbi5zcmMgPSBgaHR0cDovL29wZW53ZWF0aGVybWFwLm9yZy9pbWcvd24vJHtmb3JlY2FzdC5pY29ufUAyeC5wbmdgO1xuICAgIGlmICgkd2VhdGhlckljb24uY2hpbGRFbGVtZW50Q291bnQpICR3ZWF0aGVySWNvbi5sYXN0Q2hpbGQucmVtb3ZlKCk7XG4gICAgJHdlYXRoZXJJY29uLmFwcGVuZENoaWxkKHdlYXRoZXJJY29uKTtcbiAgfTtcblxuICBjb25zdCB1cGRhdGVMb2NhdGlvbkRPTSA9IChmb3JlY2FzdCkgPT4ge1xuICAgICR3ZWF0aGVyTWFpbi50ZXh0Q29udGVudCA9IGZvcmVjYXN0Lm1haW47XG4gICAgJGNpdHkudGV4dENvbnRlbnQgPSBmb3JlY2FzdC5jaXR5O1xuICAgICRjb3VudHJ5LnRleHRDb250ZW50ID0gZm9yZWNhc3QuY291bnRyeTtcbiAgICAkdGltZS50ZXh0Q29udGVudCA9IGZvcmVjYXN0LnRpbWU7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlRXh0cmFET00gPSAoZm9yZWNhc3QpID0+IHtcbiAgICAkaHVtaWRpdHkudGV4dENvbnRlbnQgPSBgJHtmb3JlY2FzdC5odW1pZGl0eX0lYDtcbiAgICAkd2luZFNwZWVkLnRleHRDb250ZW50ID0gYCR7Zm9yZWNhc3Qud2luZFNwZWVkfW0vc2A7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlRE9NID0gKCkgPT4ge1xuICAgIHVwZGF0ZVRlbXBlcmF0dXJlRE9NKCk7XG4gICAgY29uc3QgZm9yZWNhc3QgPSBGb3JlY2FzdC5nZXRGb3JlY2FzdCgpO1xuICAgIHVwZGF0ZVdlYXRoZXJJY29uKGZvcmVjYXN0KTtcbiAgICB1cGRhdGVMb2NhdGlvbkRPTShmb3JlY2FzdCk7XG4gICAgdXBkYXRlRXh0cmFET00oZm9yZWNhc3QpO1xuICB9O1xuXG4gIGNvbnN0IHBvcHVsYXRlV2VhdGhlciA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjaXR5TmFtZSA9IGdldENpdHlJbnB1dCgpO1xuICAgIGxvYWRpbmcodHJ1ZSk7XG4gICAgLy8gV2FpdCBmb3IgZGF0YSBiZWluZyBmZXRjaGVkXG4gICAgY29uc3QgT0sgPSBhd2FpdCBGb3JlY2FzdC5sb2FkQ29udGVudHMoY2l0eU5hbWUpO1xuICAgIGxvYWRpbmcoZmFsc2UpO1xuICAgIGlmICghT0spIHtcbiAgICAgIGNvbnNvbGUubG9nKCdMb2NhdGlvbiBub3QgZm91bmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdXBkYXRlRE9NKCk7XG4gIH07XG5cbiAgY29uc3QgdG9nZ2xlVW5pdCA9ICgpID0+IHtcbiAgICBGb3JlY2FzdC50b2dnbGVVbml0KCk7XG4gICAgdXBkYXRlVGVtcGVyYXR1cmVET00oKTtcbiAgfTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIC8vIFNhbXBsZSBWYWx1ZVxuICAgICRjaXR5SW5wdXQudmFsdWUgPSAnTG9uZG9uJztcbiAgICBwb3B1bGF0ZVdlYXRoZXIoKTtcblxuICAgICRzZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBwb3B1bGF0ZVdlYXRoZXIpO1xuICAgICRjaXR5SW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoeyBrZXkgfSkgPT4ge1xuICAgICAgaWYgKGtleSA9PT0gJ0VudGVyJykgcG9wdWxhdGVXZWF0aGVyKCk7XG4gICAgfSk7XG4gICAgJHVuaXRTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVVuaXQpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaW5pdCxcbiAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IFVJO1xuIiwiaW1wb3J0IFVJIGZyb20gJy4vbW9kdWxlcy9VSSc7XG5cblVJLmluaXQoKTtcbiJdLCJuYW1lcyI6WyJhc3luYyIsImNpdHlOYW1lIiwicmVzcG9uc2UiLCJmZXRjaCIsImNpdHkiLCJtb2RlIiwib2siLCJFcnJvciIsInN0YXR1cyIsImpzb24iLCJjaGFuZ2VVbml0IiwibnVtIiwiY3VycmVudFVuaXQiLCJmb3JlY2FzdCIsImdldEZvcmVjYXN0IiwibG9hZENvbnRlbnRzIiwidW5pdCIsIndlYXRoZXJEYXRhIiwidGVtcCIsIm1haW4iLCJmZWVsc0xpa2UiLCJmZWVsc19saWtlIiwiaHVtaWRpdHkiLCJpY29uIiwid2VhdGhlciIsImNvdW50cnkiLCJzeXMiLCJ0aW1lIiwiRGF0ZSIsInRvTG9jYWxlVGltZVN0cmluZyIsInRlbXBNYXgiLCJ0ZW1wX21heCIsInRlbXBNaW4iLCJ0ZW1wX21pbiIsIndpbmRTcGVlZCIsIndpbmQiLCJzcGVlZCIsImVyciIsInRvZ2dsZVVuaXQiLCIkY2l0eUlucHV0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiJHNlYXJjaEJ0biIsIiRtYWluIiwiYm9keSIsIiR0ZW1wIiwiJGZlZWxzTGlrZVRlbXAiLCIkdW5pdFNlbGVjdG9yIiwiJHdlYXRoZXJJY29uIiwiJHdlYXRoZXJNYWluIiwiJGNpdHkiLCIkY291bnRyeSIsIiR0aW1lIiwiJHRlbXBNYXgiLCIkdGVtcE1pbiIsIiRodW1pZGl0eSIsIiR3aW5kU3BlZWQiLCJsb2FkaW5nIiwiYmVnaW4iLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJhZGQiLCJ1cGRhdGVUZW1wZXJhdHVyZURPTSIsInRleHRDb250ZW50IiwiTWF0aCIsInJvdW5kIiwicG9wdWxhdGVXZWF0aGVyIiwidmFsdWUiLCJ0b0xvd2VyQ2FzZSIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJnZXRDaXR5SW5wdXQiLCJPSyIsIndlYXRoZXJJY29uIiwiY3JlYXRlRWxlbWVudCIsInNyYyIsImNoaWxkRWxlbWVudENvdW50IiwibGFzdENoaWxkIiwiYXBwZW5kQ2hpbGQiLCJ1cGRhdGVXZWF0aGVySWNvbiIsInVwZGF0ZUxvY2F0aW9uRE9NIiwidXBkYXRlRXh0cmFET00iLCJ1cGRhdGVET00iLCJjb25zb2xlIiwibG9nIiwiaW5pdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJrZXkiXSwic291cmNlUm9vdCI6IiJ9