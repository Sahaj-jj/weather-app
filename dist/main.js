(()=>{"use strict";const e=async e=>{const t=await fetch((n=e,`https://api.openweathermap.org/data/2.5/weather?q=${n}&appid=0b94a86a7ab72879839de5a724686c9f`),{mode:"cors"});var n;if(!t.ok)throw new Error(t.status);return t.json()},t=(e,t)=>"C"===t?1.8*e+32:5/9*(e-32),n=(()=>{const n={};return{getForecast:()=>n,loadContents:async t=>{n.unit="C",n.city=t;try{const o=await e(t);return n.temp=o.main.temp-273.15,n.feelsLike=o.main.feels_like-273.15,n.humidity=o.main.humidity,n.icon=o.weather[0].icon,n.main=o.weather[0].main,n.country=o.sys.country,n.time=(new Date).toLocaleTimeString(),n.tempMax=o.main.temp_max-273.15,n.tempMin=o.main.temp_min-273.15,n.humidity=o.main.humidity,n.windSpeed=o.wind.speed,!0}catch(e){return!1}},toggleUnit:()=>(n.temp=t(n.temp,n.unit),n.feelsLike=t(n.feelsLike,n.unit),n.tempMax=t(n.tempMax,n.unit),n.tempMin=t(n.tempMin,n.unit),n.unit="C"===n.unit?"F":"C",n.unit)}})();(()=>{const e=document.querySelector("input.city"),t=document.querySelector(".search-city"),o=document.querySelector(".main"),i=document.querySelector("body"),r=document.querySelector(".temperature"),c=document.querySelector(".feels-like-temp"),a=document.querySelector(".unit-selector"),u=document.querySelector(".weather-icon"),m=document.querySelector(".weather-main"),d=document.querySelector(".location-info > .city"),s=document.querySelector(".country"),l=document.querySelector(".time"),y=document.querySelector(".temp-max > .content"),p=document.querySelector(".temp-min > .content"),h=document.querySelector(".humidity > .content"),C=document.querySelector(".wind > .content"),w=e=>{e?(i.style.pointerEvents="none",o.classList.remove("loaded")):(o.classList.add("loaded"),i.style.pointerEvents="auto")},S=()=>{const e=n.getForecast();r.textContent=`${Math.round(e.temp)}`,c.textContent=`${Math.round(e.feelsLike)}째`,a.textContent=`째${e.unit}`,y.textContent=`${Math.round(e.tempMax)}째`,p.textContent=`${Math.round(e.tempMin)}째`},x=async()=>{const t=(()=>{let t=e.value.toLowerCase();return t=t[0].toUpperCase()+t.slice(1),e.value="",t})();w(!0);const o=await n.loadContents(t);w(!1),o?(()=>{S();const e=n.getForecast();(e=>{const t=document.createElement("img");t.src=`http://openweathermap.org/img/wn/${e.icon}@4x.png`,u.childElementCount&&u.lastChild.remove(),u.appendChild(t)})(e),(e=>{m.textContent=e.main,d.textContent=`${e.city} ${e.country}`,s.textContent=e.country,l.textContent=e.time})(e),(e=>{h.textContent=`${e.humidity}%`,C.textContent=`${e.windSpeed} m/s`})(e)})():console.log("Location not found")},q=()=>{n.toggleUnit(),S()};return{init:()=>{e.value="London",x(),t.addEventListener("click",x),e.addEventListener("keyup",(({key:e})=>{"Enter"===e&&x()})),a.addEventListener("click",q)}}})().init()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ckIsRUFBY3lDLGlCQUFpQixRQUFTbEQsTUFyR2pDLEdDQVgsUSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL21vZHVsZXMvV2VhdGhlci5qcyIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9tb2R1bGVzL0ZvcmVjYXN0LmpzIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL21vZHVsZXMvVUkuanMiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgV2VhdGhlciA9ICgoKSA9PiB7XG4gIGNvbnN0IGtleSA9ICcwYjk0YTg2YTdhYjcyODc5ODM5ZGU1YTcyNDY4NmM5Zic7XG5cbiAgY29uc3QgZ2V0VXJsID0gKGNpdHkpID0+IHtcbiAgICBjb25zdCB1cmwgPSBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke2NpdHl9JmFwcGlkPSR7a2V5fWA7XG4gICAgcmV0dXJuIHVybDtcbiAgfTtcblxuICBjb25zdCBnZXREYXRhID0gYXN5bmMgKGNpdHlOYW1lKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChnZXRVcmwoY2l0eU5hbWUpLCB7IG1vZGU6ICdjb3JzJyB9KTtcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IocmVzcG9uc2Uuc3RhdHVzKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGdldERhdGEsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBXZWF0aGVyO1xuXG4vLyBTYW1wbGUgSnNvblxuLy9cbi8vIHtcbi8vICAgXCJjb29yZFwiOiB7XG4vLyAgICAgXCJsb25cIjogLTEyMi4wOCxcbi8vICAgICBcImxhdFwiOiAzNy4zOVxuLy8gICB9LFxuLy8gICBcIndlYXRoZXJcIjogW1xuLy8gICAgIHtcbi8vICAgICAgIFwiaWRcIjogODAwLFxuLy8gICAgICAgXCJtYWluXCI6IFwiQ2xlYXJcIixcbi8vICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJjbGVhciBza3lcIixcbi8vICAgICAgIFwiaWNvblwiOiBcIjAxZFwiXG4vLyAgICAgfVxuLy8gICBdLFxuLy8gICBcImJhc2VcIjogXCJzdGF0aW9uc1wiLFxuLy8gICBcIm1haW5cIjoge1xuLy8gICAgIFwidGVtcFwiOiAyODIuNTUsXG4vLyAgICAgXCJmZWVsc19saWtlXCI6IDI4MS44Nixcbi8vICAgICBcInRlbXBfbWluXCI6IDI4MC4zNyxcbi8vICAgICBcInRlbXBfbWF4XCI6IDI4NC4yNixcbi8vICAgICBcInByZXNzdXJlXCI6IDEwMjMsXG4vLyAgICAgXCJodW1pZGl0eVwiOiAxMDBcbi8vICAgfSxcbi8vICAgXCJ2aXNpYmlsaXR5XCI6IDE2MDkzLFxuLy8gICBcIndpbmRcIjoge1xuLy8gICAgIFwic3BlZWRcIjogMS41LFxuLy8gICAgIFwiZGVnXCI6IDM1MFxuLy8gICB9LFxuLy8gICBcImNsb3Vkc1wiOiB7XG4vLyAgICAgXCJhbGxcIjogMVxuLy8gICB9LFxuLy8gICBcImR0XCI6IDE1NjAzNTA2NDUsXG4vLyAgIFwic3lzXCI6IHtcbi8vICAgICBcInR5cGVcIjogMSxcbi8vICAgICBcImlkXCI6IDUxMjIsXG4vLyAgICAgXCJtZXNzYWdlXCI6IDAuMDEzOSxcbi8vICAgICBcImNvdW50cnlcIjogXCJVU1wiLFxuLy8gICAgIFwic3VucmlzZVwiOiAxNTYwMzQzNjI3LFxuLy8gICAgIFwic3Vuc2V0XCI6IDE1NjAzOTY1NjNcbi8vICAgfSxcbi8vICAgXCJ0aW1lem9uZVwiOiAtMjUyMDAsXG4vLyAgIFwiaWRcIjogNDIwMDA2MzUzLFxuLy8gICBcIm5hbWVcIjogXCJNb3VudGFpbiBWaWV3XCIsXG4vLyAgIFwiY29kXCI6IDIwMFxuLy8gICB9XG4iLCJpbXBvcnQgV2VhdGhlciBmcm9tICcuL1dlYXRoZXInO1xuXG5jb25zdCBjaGFuZ2VVbml0ID0gKG51bSwgY3VycmVudFVuaXQpID0+IHtcbiAgaWYgKGN1cnJlbnRVbml0ID09PSAnQycpIHJldHVybiBudW0gKiAoOSAvIDUpICsgMzI7XG4gIHJldHVybiAobnVtIC0gMzIpICogKDUgLyA5KTtcbn07XG5cbmNvbnN0IEZvcmVjYXN0ID0gKCgpID0+IHtcbiAgY29uc3QgZm9yZWNhc3QgPSB7fTtcblxuICBjb25zdCBsb2FkQ29udGVudHMgPSBhc3luYyAoY2l0eU5hbWUpID0+IHtcbiAgICBmb3JlY2FzdC51bml0ID0gJ0MnO1xuICAgIGZvcmVjYXN0LmNpdHkgPSBjaXR5TmFtZTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgd2VhdGhlckRhdGEgPSBhd2FpdCBXZWF0aGVyLmdldERhdGEoY2l0eU5hbWUpO1xuICAgICAgLy8gdGVtcC1pbmZvXG4gICAgICBmb3JlY2FzdC50ZW1wID0gd2VhdGhlckRhdGEubWFpbi50ZW1wIC0gMjczLjE1O1xuICAgICAgZm9yZWNhc3QuZmVlbHNMaWtlID0gd2VhdGhlckRhdGEubWFpbi5mZWVsc19saWtlIC0gMjczLjE1O1xuICAgICAgZm9yZWNhc3QuaHVtaWRpdHkgPSB3ZWF0aGVyRGF0YS5tYWluLmh1bWlkaXR5O1xuICAgICAgZm9yZWNhc3QuaWNvbiA9IHdlYXRoZXJEYXRhLndlYXRoZXJbMF0uaWNvbjtcbiAgICAgIC8vIGxvY2F0aW9uLWluZm9cbiAgICAgIGZvcmVjYXN0Lm1haW4gPSB3ZWF0aGVyRGF0YS53ZWF0aGVyWzBdLm1haW47XG4gICAgICBmb3JlY2FzdC5jb3VudHJ5ID0gd2VhdGhlckRhdGEuc3lzLmNvdW50cnk7XG4gICAgICBmb3JlY2FzdC50aW1lID0gbmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKTtcbiAgICAgIC8vIGV4dHJhLWluZm9cbiAgICAgIGZvcmVjYXN0LnRlbXBNYXggPSB3ZWF0aGVyRGF0YS5tYWluLnRlbXBfbWF4IC0gMjczLjE1O1xuICAgICAgZm9yZWNhc3QudGVtcE1pbiA9IHdlYXRoZXJEYXRhLm1haW4udGVtcF9taW4gLSAyNzMuMTU7XG4gICAgICBmb3JlY2FzdC5odW1pZGl0eSA9IHdlYXRoZXJEYXRhLm1haW4uaHVtaWRpdHk7XG4gICAgICBmb3JlY2FzdC53aW5kU3BlZWQgPSB3ZWF0aGVyRGF0YS53aW5kLnNwZWVkO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVVuaXQgPSAoKSA9PiB7XG4gICAgZm9yZWNhc3QudGVtcCA9IGNoYW5nZVVuaXQoZm9yZWNhc3QudGVtcCwgZm9yZWNhc3QudW5pdCk7XG4gICAgZm9yZWNhc3QuZmVlbHNMaWtlID0gY2hhbmdlVW5pdChmb3JlY2FzdC5mZWVsc0xpa2UsIGZvcmVjYXN0LnVuaXQpO1xuICAgIGZvcmVjYXN0LnRlbXBNYXggPSBjaGFuZ2VVbml0KGZvcmVjYXN0LnRlbXBNYXgsIGZvcmVjYXN0LnVuaXQpO1xuICAgIGZvcmVjYXN0LnRlbXBNaW4gPSBjaGFuZ2VVbml0KGZvcmVjYXN0LnRlbXBNaW4sIGZvcmVjYXN0LnVuaXQpO1xuICAgIGZvcmVjYXN0LnVuaXQgPSBmb3JlY2FzdC51bml0ID09PSAnQycgPyAnRicgOiAnQyc7XG4gICAgcmV0dXJuIGZvcmVjYXN0LnVuaXQ7XG4gIH07XG5cbiAgY29uc3QgZ2V0Rm9yZWNhc3QgPSAoKSA9PiBmb3JlY2FzdDtcblxuICByZXR1cm4ge1xuICAgIGdldEZvcmVjYXN0LFxuICAgIGxvYWRDb250ZW50cyxcbiAgICB0b2dnbGVVbml0LFxuICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgRm9yZWNhc3Q7XG4iLCJpbXBvcnQgRm9yZWNhc3QgZnJvbSAnLi9Gb3JlY2FzdCc7XG5cbmNvbnN0IFVJID0gKCgpID0+IHtcbiAgY29uc3QgJGNpdHlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0LmNpdHknKTtcbiAgY29uc3QgJHNlYXJjaEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zZWFyY2gtY2l0eScpO1xuICBjb25zdCAkbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluJyk7XG4gIGNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gIC8vIHRlbXAtaW5mb1xuICBjb25zdCAkdGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wZXJhdHVyZScpO1xuICBjb25zdCAkZmVlbHNMaWtlVGVtcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVscy1saWtlLXRlbXAnKTtcbiAgY29uc3QgJHVuaXRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51bml0LXNlbGVjdG9yJyk7XG4gIGNvbnN0ICR3ZWF0aGVySWNvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWljb24nKTtcbiAgLy8gbG9jYXRpb24taW5mb1xuICBjb25zdCAkd2VhdGhlck1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1tYWluJyk7XG4gIGNvbnN0ICRjaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvY2F0aW9uLWluZm8gPiAuY2l0eScpO1xuICBjb25zdCAkY291bnRyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb3VudHJ5Jyk7XG4gIGNvbnN0ICR0aW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRpbWUnKTtcbiAgLy8gZXh0cmEtaW5mb1xuICBjb25zdCAkdGVtcE1heCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wLW1heCA+IC5jb250ZW50Jyk7XG4gIGNvbnN0ICR0ZW1wTWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXAtbWluID4gLmNvbnRlbnQnKTtcbiAgY29uc3QgJGh1bWlkaXR5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh1bWlkaXR5ID4gLmNvbnRlbnQnKTtcbiAgY29uc3QgJHdpbmRTcGVlZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5kID4gLmNvbnRlbnQnKTtcblxuICBjb25zdCBnZXRDaXR5SW5wdXQgPSAoKSA9PiB7XG4gICAgbGV0IGNpdHlOYW1lID0gJGNpdHlJbnB1dC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgIGNpdHlOYW1lID0gY2l0eU5hbWVbMF0udG9VcHBlckNhc2UoKSArIGNpdHlOYW1lLnNsaWNlKDEpO1xuICAgICRjaXR5SW5wdXQudmFsdWUgPSAnJztcbiAgICByZXR1cm4gY2l0eU5hbWU7XG4gIH07XG5cbiAgY29uc3QgbG9hZGluZyA9IChiZWdpbikgPT4ge1xuICAgIGlmIChiZWdpbikge1xuICAgICAgYm9keS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgJG1haW4uY2xhc3NMaXN0LnJlbW92ZSgnbG9hZGVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRtYWluLmNsYXNzTGlzdC5hZGQoJ2xvYWRlZCcpO1xuICAgICAgYm9keS5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ2F1dG8nO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB1cGRhdGVUZW1wZXJhdHVyZURPTSA9ICgpID0+IHtcbiAgICBjb25zdCBmb3JlY2FzdCA9IEZvcmVjYXN0LmdldEZvcmVjYXN0KCk7XG4gICAgJHRlbXAudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKGZvcmVjYXN0LnRlbXApfWA7XG4gICAgJGZlZWxzTGlrZVRlbXAudGV4dENvbnRlbnQgPSBgJHtNYXRoLnJvdW5kKGZvcmVjYXN0LmZlZWxzTGlrZSl9wrBgO1xuICAgICR1bml0U2VsZWN0b3IudGV4dENvbnRlbnQgPSBgwrAke2ZvcmVjYXN0LnVuaXR9YDtcbiAgICAkdGVtcE1heC50ZXh0Q29udGVudCA9IGAke01hdGgucm91bmQoZm9yZWNhc3QudGVtcE1heCl9wrBgO1xuICAgICR0ZW1wTWluLnRleHRDb250ZW50ID0gYCR7TWF0aC5yb3VuZChmb3JlY2FzdC50ZW1wTWluKX3CsGA7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlV2VhdGhlckljb24gPSAoZm9yZWNhc3QpID0+IHtcbiAgICBjb25zdCB3ZWF0aGVySWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIHdlYXRoZXJJY29uLnNyYyA9IGBodHRwOi8vb3BlbndlYXRoZXJtYXAub3JnL2ltZy93bi8ke2ZvcmVjYXN0Lmljb259QDR4LnBuZ2A7XG4gICAgaWYgKCR3ZWF0aGVySWNvbi5jaGlsZEVsZW1lbnRDb3VudCkgJHdlYXRoZXJJY29uLmxhc3RDaGlsZC5yZW1vdmUoKTtcbiAgICAkd2VhdGhlckljb24uYXBwZW5kQ2hpbGQod2VhdGhlckljb24pO1xuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZUxvY2F0aW9uRE9NID0gKGZvcmVjYXN0KSA9PiB7XG4gICAgJHdlYXRoZXJNYWluLnRleHRDb250ZW50ID0gZm9yZWNhc3QubWFpbjtcbiAgICAkY2l0eS50ZXh0Q29udGVudCA9IGAke2ZvcmVjYXN0LmNpdHl9ICR7Zm9yZWNhc3QuY291bnRyeX1gO1xuICAgICRjb3VudHJ5LnRleHRDb250ZW50ID0gZm9yZWNhc3QuY291bnRyeTtcbiAgICAkdGltZS50ZXh0Q29udGVudCA9IGZvcmVjYXN0LnRpbWU7XG4gIH07XG5cbiAgY29uc3QgdXBkYXRlRXh0cmFET00gPSAoZm9yZWNhc3QpID0+IHtcbiAgICAkaHVtaWRpdHkudGV4dENvbnRlbnQgPSBgJHtmb3JlY2FzdC5odW1pZGl0eX0lYDtcbiAgICAkd2luZFNwZWVkLnRleHRDb250ZW50ID0gYCR7Zm9yZWNhc3Qud2luZFNwZWVkfSBtL3NgO1xuICB9O1xuXG4gIGNvbnN0IHVwZGF0ZURPTSA9ICgpID0+IHtcbiAgICB1cGRhdGVUZW1wZXJhdHVyZURPTSgpO1xuICAgIGNvbnN0IGZvcmVjYXN0ID0gRm9yZWNhc3QuZ2V0Rm9yZWNhc3QoKTtcbiAgICB1cGRhdGVXZWF0aGVySWNvbihmb3JlY2FzdCk7XG4gICAgdXBkYXRlTG9jYXRpb25ET00oZm9yZWNhc3QpO1xuICAgIHVwZGF0ZUV4dHJhRE9NKGZvcmVjYXN0KTtcbiAgfTtcblxuICBjb25zdCBwb3B1bGF0ZVdlYXRoZXIgPSBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgY2l0eU5hbWUgPSBnZXRDaXR5SW5wdXQoKTtcbiAgICBsb2FkaW5nKHRydWUpO1xuICAgIC8vIFdhaXQgZm9yIGRhdGEgYmVpbmcgZmV0Y2hlZFxuICAgIGNvbnN0IE9LID0gYXdhaXQgRm9yZWNhc3QubG9hZENvbnRlbnRzKGNpdHlOYW1lKTtcbiAgICBsb2FkaW5nKGZhbHNlKTtcbiAgICBpZiAoIU9LKSB7XG4gICAgICBjb25zb2xlLmxvZygnTG9jYXRpb24gbm90IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHVwZGF0ZURPTSgpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVVuaXQgPSAoKSA9PiB7XG4gICAgRm9yZWNhc3QudG9nZ2xlVW5pdCgpO1xuICAgIHVwZGF0ZVRlbXBlcmF0dXJlRE9NKCk7XG4gIH07XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICAvLyBTYW1wbGUgVmFsdWVcbiAgICAkY2l0eUlucHV0LnZhbHVlID0gJ0xvbmRvbic7XG4gICAgcG9wdWxhdGVXZWF0aGVyKCk7XG5cbiAgICAkc2VhcmNoQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcG9wdWxhdGVXZWF0aGVyKTtcbiAgICAkY2l0eUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgKHsga2V5IH0pID0+IHtcbiAgICAgIGlmIChrZXkgPT09ICdFbnRlcicpIHBvcHVsYXRlV2VhdGhlcigpO1xuICAgIH0pO1xuICAgICR1bml0U2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVVbml0KTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIGluaXQsXG4gIH07XG59KSgpO1xuXG5leHBvcnQgZGVmYXVsdCBVSTtcbiIsImltcG9ydCBVSSBmcm9tICcuL21vZHVsZXMvVUknO1xuXG5VSS5pbml0KCk7XG4iXSwibmFtZXMiOlsiYXN5bmMiLCJjaXR5TmFtZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJjaXR5IiwibW9kZSIsIm9rIiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwiY2hhbmdlVW5pdCIsIm51bSIsImN1cnJlbnRVbml0IiwiZm9yZWNhc3QiLCJnZXRGb3JlY2FzdCIsImxvYWRDb250ZW50cyIsInVuaXQiLCJ3ZWF0aGVyRGF0YSIsInRlbXAiLCJtYWluIiwiZmVlbHNMaWtlIiwiZmVlbHNfbGlrZSIsImh1bWlkaXR5IiwiaWNvbiIsIndlYXRoZXIiLCJjb3VudHJ5Iiwic3lzIiwidGltZSIsIkRhdGUiLCJ0b0xvY2FsZVRpbWVTdHJpbmciLCJ0ZW1wTWF4IiwidGVtcF9tYXgiLCJ0ZW1wTWluIiwidGVtcF9taW4iLCJ3aW5kU3BlZWQiLCJ3aW5kIiwic3BlZWQiLCJlcnIiLCJ0b2dnbGVVbml0IiwiJGNpdHlJbnB1dCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIiRzZWFyY2hCdG4iLCIkbWFpbiIsImJvZHkiLCIkdGVtcCIsIiRmZWVsc0xpa2VUZW1wIiwiJHVuaXRTZWxlY3RvciIsIiR3ZWF0aGVySWNvbiIsIiR3ZWF0aGVyTWFpbiIsIiRjaXR5IiwiJGNvdW50cnkiLCIkdGltZSIsIiR0ZW1wTWF4IiwiJHRlbXBNaW4iLCIkaHVtaWRpdHkiLCIkd2luZFNwZWVkIiwibG9hZGluZyIsImJlZ2luIiwic3R5bGUiLCJwb2ludGVyRXZlbnRzIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwidXBkYXRlVGVtcGVyYXR1cmVET00iLCJ0ZXh0Q29udGVudCIsIk1hdGgiLCJyb3VuZCIsInBvcHVsYXRlV2VhdGhlciIsInZhbHVlIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZ2V0Q2l0eUlucHV0IiwiT0siLCJ3ZWF0aGVySWNvbiIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJjaGlsZEVsZW1lbnRDb3VudCIsImxhc3RDaGlsZCIsImFwcGVuZENoaWxkIiwidXBkYXRlV2VhdGhlckljb24iLCJ1cGRhdGVMb2NhdGlvbkRPTSIsInVwZGF0ZUV4dHJhRE9NIiwidXBkYXRlRE9NIiwiY29uc29sZSIsImxvZyIsImluaXQiLCJhZGRFdmVudExpc3RlbmVyIiwia2V5Il0sInNvdXJjZVJvb3QiOiIifQ==